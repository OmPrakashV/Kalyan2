function activateUrgentPath(){advanceForm(!0);var e=document.getElementById("contactService");e&&(e.value="urgent");var t=document.getElementById("contact");if(t){var n=t.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:n,behavior:"smooth"})}}function advanceForm(e){var t=document.getElementById("contactName"),n=document.getElementById("contactPhone"),a=document.getElementById("formStep1"),i=document.getElementById("formStep2");if(a&&i){if(!e){if(t&&!t.value.trim())return void t.focus();if(n&&!n.value.trim())return void n.focus()}a.classList.add("form-step--hidden"),i.classList.remove("form-step--hidden"),i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",block:"nearest"})}}function setPatientType(e){var t=document.getElementById("ptNew"),n=document.getElementById("ptFollowUp");t&&t.classList.toggle("patient-type-btn--active","new"===e),n&&n.classList.toggle("patient-type-btn--active","followup"===e);var a=document.getElementById("contactService");a&&(a.value="new"===e?"consultation":"follow-up")}function initDeferredSystems(){initBlogSystem(),initContactForm(),initYouTubeFeed(),initInstagramFeed(),initGoogleReviews(),initWhatsAppWidget(),initLazyIframes(),initMediaTabs(),initServicesCarousel(),initConditionsCarousel(),initAboutToggle(),initHeroSlider(),initHeroTyping(),initStatCounters(),initParallaxShapes(),initTiltCards(),initFAQ(),initBackToTop()}function initFAQ(){var e=document.querySelectorAll(".faq-item");e.forEach(function(t){var n=t.querySelector(".faq-question");n&&n.addEventListener("click",function(){var a=t.classList.contains("faq-item--open");e.forEach(function(e){e.classList.remove("faq-item--open");var t=e.querySelector(".faq-question");t&&t.setAttribute("aria-expanded","false")}),a||(t.classList.add("faq-item--open"),n.setAttribute("aria-expanded","true"))})})}function initNavigation(){const e=document.getElementById("navToggle"),t=document.getElementById("navMenu"),n=document.querySelectorAll(".nav-link"),a=document.getElementById("nav");e&&e.addEventListener("click",function(){e.classList.toggle("active"),t.classList.toggle("active");var n=t.classList.contains("active");e.setAttribute("aria-expanded",n),e.setAttribute("aria-label",n?"Close menu":"Toggle menu"),document.body.style.overflow=n?"hidden":""}),n.forEach(n=>{n.addEventListener("click",function(){e.classList.remove("active"),t.classList.remove("active"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Toggle menu"),document.body.style.overflow=""})});let i=!1;window.addEventListener("scroll",function(){i||(i=!0,requestAnimationFrame(function(){window.pageYOffset>100?(a.style.boxShadow="0 4px 30px rgba(0, 0, 0, 0.4)",a.style.borderBottomColor="rgba(15, 251, 249, 0.08)"):(a.style.boxShadow="0 4px 30px rgba(0, 0, 0, 0.3)",a.style.borderBottomColor="rgba(255, 255, 255, 0.06)"),i=!1}))},{passive:!0}),n.forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(t.startsWith("#")){e.preventDefault();const n=document.querySelector(t);if(n){const e=n.offsetTop-80;window.scrollTo({top:e,behavior:"smooth"})}}})})}function initScrollEffects(){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches){var e=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(t.target.classList.remove("scroll-hidden"),t.target.classList.add("scroll-visible"),e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -100px 0px"});document.querySelectorAll(".service-card, .blog-card, .grev-card, .credential-item").forEach(function(t,n){t.classList.add("scroll-hidden"),t.style.transition="opacity 0.6s ease-out "+.1*n+"s, transform 0.6s ease-out "+.1*n+"s",e.observe(t)})}}function initUrgentBar(){var e=document.getElementById("urgentBar"),t=document.getElementById("nav"),n=document.getElementById("home"),a=document.getElementById("contact");if(e&&t&&n&&a){e.style.top=t.offsetHeight+"px";var i=!1;window.addEventListener("scroll",function(){i||(i=!0,requestAnimationFrame(o))},{passive:!0})}function o(){var t=window.pageYOffset,o=n.offsetTop+n.offsetHeight,r=a.offsetTop;t>o&&t<r-100?(e.classList.add("urgent-bar--visible"),e.setAttribute("aria-hidden","false")):(e.classList.remove("urgent-bar--visible"),e.setAttribute("aria-hidden","true")),i=!1}}function initBlogSystem(){var e=document.getElementById("blogGrid");if(e)if(GOOGLE_SHEET_ID&&"YOUR_SHEET_ID"!==GOOGLE_SHEET_ID){var t="https://docs.google.com/spreadsheets/d/"+GOOGLE_SHEET_ID+"/export?format=csv&gid=0";showSkeletons(e,3,"skeleton-card"),fetch(t).then(function(e){if(!e.ok)throw new Error("Sheet fetch failed");return e.text()}).then(function(t){var n=parseCSV(t);n.length>0&&n.shift(),0!==n.length?(e.innerHTML="",n.forEach(function(t){var n=(t[0]||"").trim(),a=(t[1]||"").trim(),i=(t[2]||"").trim(),o=(t[3]||"").trim(),r=(t[4]||"").trim(),s=(t[5]||"").trim();if(n){var c=document.createElement("article");c.className="blog-card";var l,d,u=s?"background-image: url("+sanitizeHTML(s)+"); background-size: cover; background-position: center;":"";c.innerHTML='<div class="blog-image"><div class="blog-image-placeholder" style="'+u+'"><span class="blog-category">'+sanitizeHTML(a)+'</span></div></div><div class="blog-content"><div class="blog-meta"><span class="blog-date">'+sanitizeHTML(i?formatDate(i):"")+'</span></div><h3 class="blog-title">'+sanitizeHTML(n)+'</h3><p class="blog-excerpt">'+sanitizeHTML(o)+'</p><a href="#" class="blog-link">Read Article ‚Üí</a></div>',l=n,d=r,c.querySelector(".blog-link").addEventListener("click",function(e){e.preventDefault(),showArticleModal(l,d)}),e.appendChild(c)}})):e.innerHTML='<div class="blog-fallback"><p>No articles published yet.</p></div>'}).catch(function(){e.innerHTML='<div class="blog-fallback"><p>Could not load articles. Please try again later.</p></div>'})}else e.innerHTML='<div class="blog-fallback"><p>Blog not configured yet.</p><p>Set <code>GOOGLE_SHEET_ID</code> in script.js to load articles from Google Sheets.</p></div>'}function parseCSV(e){for(var t=[],n=[],a="",i=!1,o=0;o<e.length;o++){var r=e[o],s=e[o+1];i?'"'===r&&'"'===s?(a+='"',o++):'"'===r?i=!1:a+=r:'"'===r?i=!0:","===r?(n.push(a),a=""):"\r"===r&&"\n"===s?(n.push(a),a="",t.push(n),n=[],o++):"\n"===r?(n.push(a),a="",t.push(n),n=[]):a+=r}return(a||n.length>0)&&(n.push(a),t.push(n)),t}document.addEventListener("DOMContentLoaded",function(){initNavigation(),initScrollEffects(),initUrgentBar(),initModal(),"requestIdleCallback"in window?requestIdleCallback(initDeferredSystems):setTimeout(initDeferredSystems,200)});const WHATSAPP_NUMBER="919966003251";function showFieldError(e,t){var n=e.parentElement.querySelector(".field-error");n&&n.remove();var a=document.createElement("span");a.className="field-error",a.style.cssText="display:block;color:#FF6B6B;font-size:0.8rem;margin-top:0.25rem;",a.textContent=t,e.parentElement.appendChild(a),e.style.borderColor="#FF6B6B"}function clearFieldError(e){var t=e.parentElement.querySelector(".field-error");t&&t.remove(),e.style.borderColor=""}function initContactForm(){const e=document.getElementById("contactForm");e&&e.addEventListener("submit",function(t){t.preventDefault();const n=document.getElementById("contactName"),a=document.getElementById("contactPhone"),i=document.getElementById("contactEmail"),o=n?n.value.trim():"",r=a?a.value.trim():"",s=i?i.value.trim():"",c=document.getElementById("contactService").value,l=document.getElementById("contactMessage").value;n&&clearFieldError(n),a&&clearFieldError(a),i&&clearFieldError(i);var d=!0;if((!o||o.length<2)&&(n&&showFieldError(n,"Please enter your name (at least 2 characters)."),d=!1),r&&/^[\d\s\+\-]{7,15}$/.test(r)||(a&&showFieldError(a,"Please enter a valid phone number."),d=!1),s&&!isValidEmail(s)&&(i&&showFieldError(i,"Please enter a valid email address."),d=!1),!d)return;let u=JSON.parse(localStorage.getItem("contacts"))||[];u.push({name:o,phone:r,email:s,service:c,message:l,date:(new Date).toISOString()}),localStorage.setItem("contacts",JSON.stringify(u));var m=[];m.push("*New Appointment Request*"),m.push(""),m.push("*Name:* "+o),r&&m.push("*Phone:* "+r),s&&m.push("*Email:* "+s),c&&m.push("*Service:* "+c),l&&(m.push(""),m.push("*Message:*"),m.push(l));var v=encodeURIComponent(m.join("\n")),g="https://api.whatsapp.com/send?phone="+WHATSAPP_NUMBER+"&text="+v;window.open(g,"_blank"),e.reset();var f=document.getElementById("formStep1"),p=document.getElementById("formStep2");f&&f.classList.remove("form-step--hidden"),p&&p.classList.add("form-step--hidden"),showModal("Redirecting to WhatsApp!","Your appointment details have been prepared. Please send the message on WhatsApp to complete your booking.")})}function initModal(){const e=document.getElementById("successModal"),t=document.getElementById("closeModal");t&&t.addEventListener("click",function(){e.classList.remove("active"),e.classList.remove("modal--article")}),e&&e.addEventListener("click",function(t){t.target===e&&(e.classList.remove("active"),e.classList.remove("modal--article"))}),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.classList.contains("active")&&(e.classList.remove("active"),e.classList.remove("modal--article"))})}function showModal(e,t){const n=document.getElementById("successModal"),a=n.querySelector(".modal-title"),i=document.getElementById("modalMessage");a.textContent=e,-1!==t.indexOf("\n")?(i.innerHTML="",t.split("\n\n").forEach(function(e){var t=document.createElement("p");t.textContent=e,t.style.marginBottom="1rem",t.style.textAlign="left",i.appendChild(t)})):i.textContent=t,n.classList.add("active")}function showArticleModal(e,t){var n=document.getElementById("successModal");n&&n.classList.add("modal--article"),showModal(e,t);var a=document.getElementById("modalMessage");if(a){var i=document.createElement("div");i.className="article-cta",i.innerHTML='<hr style="border:none;border-top:1px solid rgba(255,255,255,0.08);margin:1.25rem 0"><p style="font-family:var(--font-display);font-size:0.82rem;letter-spacing:0.5px;text-align:center;color:var(--slate-light);margin-bottom:0.75rem;text-transform:uppercase">Ready to take the next step?</p><a href="#contact" class="btn btn-primary" style="display:block;text-align:center;" onclick="document.getElementById(\'successModal\').classList.remove(\'active\')">Book a Consultation to Discuss Your Case</a>',a.appendChild(i)}}const GOOGLE_SHEET_ID="YOUR_SHEET_ID";var HERO_IMAGES=["images/photo.webp","images/photo2.webp","images/photo3.webp","images/photo4.webp","images/photo5.webp","images/photo6.webp"];const YOUTUBE_CHANNEL_ID="YOUR_CHANNEL_ID",YOUTUBE_VIDEO_COUNT=6,INSTAGRAM_ACCESS_TOKEN="YOUR_ACCESS_TOKEN",INSTAGRAM_POST_COUNT=12,GOOGLE_MAPS_URL="https://maps.app.goo.gl/21FxMEDhcGHSCwFB7",GOOGLE_PLACE_ID="YOUR_PLACE_ID",GOOGLE_MAPS_API_KEY="YOUR_API_KEY";function initHeroSlider(){var e=document.querySelector(".hero-slider"),t=document.querySelector(".hero-slider-dots");if(e&&t&&!(HERO_IMAGES.length<=1)){HERO_IMAGES.forEach(function(t,n){var a=document.createElement("img");0===n?a.src=t:a.dataset.src=t,a.alt="Dr. Kalyan Vangara",a.className="hero-slide"+(0===n?" active":""),e.appendChild(a)}),HERO_IMAGES.forEach(function(e,n){var a=document.createElement("button");a.className="hero-slider-dot"+(0===n?" active":""),a.setAttribute("aria-label","Go to slide "+(n+1)),a.addEventListener("click",function(){l(n)}),t.appendChild(a)});var n,a=0,i=e.querySelectorAll(".hero-slide"),o=t.querySelectorAll(".hero-slider-dot");d();var r=document.querySelector(".hero-slider-frame");r&&(r.addEventListener("mouseenter",function(){clearInterval(n)}),r.addEventListener("mouseleave",d)),document.addEventListener("visibilitychange",function(){document.hidden?clearInterval(n):d()});var s=0;e.addEventListener("touchstart",function(e){s=e.changedTouches[0].clientX},{passive:!0}),e.addEventListener("touchend",function(e){var t=e.changedTouches[0].clientX-s;Math.abs(t)>50&&(l(a+(t<0?1:-1)),d())},{passive:!0})}function c(e){e.dataset.src&&(e.src=e.dataset.src,delete e.dataset.src)}function l(e){i[a].classList.remove("active"),o[a].classList.remove("active"),a=(e+i.length)%i.length,c(i[a]),i[a].classList.add("active"),o[a].classList.add("active"),c(i[(a+1)%i.length])}function d(){clearInterval(n),n=setInterval(function(){l(a+1)},4e3)}}function initHeroTyping(){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches){var e=document.querySelectorAll(".title-line");e.length&&e.forEach(function(t,n){var a=t.textContent;t.textContent="",t.style.visibility="visible";var i=0;setTimeout(function(){var o=setInterval(function(){t.textContent=a.slice(0,i+1),++i>=a.length&&(clearInterval(o),n===e.length-1&&(t.classList.add("typing-cursor"),setTimeout(function(){t.classList.remove("typing-cursor")},2500)))},35)},800*n+600)})}}function initStatCounters(){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches){var e=document.querySelectorAll(".stat-number");if(e.length){var t=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var n=e.target,a=n.textContent.match(/^(\d+)(\+?)$/);if(a){var i=parseInt(a[1]),o=a[2],r=null;requestAnimationFrame(function e(t){r||(r=t);var a=Math.min((t-r)/1200,1),s=1-Math.pow(1-a,3),c=Math.round(0+(i-0)*s);n.textContent=c+o,a<1?requestAnimationFrame(e):n.classList.add("counted")})}else n.classList.add("counted");t.unobserve(n)}})},{threshold:.5});e.forEach(function(e){t.observe(e)})}}}function initParallaxShapes(){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches){var e=document.querySelectorAll(".shape");if(e.length){var t=!1;window.addEventListener("scroll",function(){t||(t=!0,requestAnimationFrame(function(){var n=window.pageYOffset;e.forEach(function(e,t){var a=.03*(t+1);e.style.transform="translateY("+n*a+"px)"}),t=!1}))},{passive:!0})}}}function initTiltCards(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||("ontouchstart"in window||document.querySelectorAll(".service-card").forEach(function(e){e.addEventListener("mousemove",function(t){var n=e.getBoundingClientRect(),a=t.clientX-n.left,i=t.clientY-n.top,o=n.width/2,r=n.height/2,s=(i-r)/r*-4,c=(a-o)/o*4;e.style.transform="translateY(-8px) perspective(600px) rotateX("+s+"deg) rotateY("+c+"deg)"}),e.addEventListener("mouseleave",function(){e.style.transform="translateY(0) perspective(600px) rotateX(0deg) rotateY(0deg)"})}))}function initMediaTabs(){var e=document.querySelectorAll(".media-tab"),t=document.querySelectorAll(".media-tab-panel");e.length&&t.length&&e.forEach(function(n){n.addEventListener("click",function(){var a=n.getAttribute("data-tab");e.forEach(function(e){e.classList.remove("active")}),t.forEach(function(e){e.classList.remove("active")}),n.classList.add("active");var i=document.getElementById("panel"+a.charAt(0).toUpperCase()+a.slice(1));i&&i.classList.add("active")})})}function initConditionsCarousel(){var e=document.getElementById("conditionsTrack"),t=document.getElementById("conditionsDots"),n=document.getElementById("conditionsPrev"),a=document.getElementById("conditionsNext");if(e&&t&&n&&a){var i,o=e.querySelectorAll(".conditions-card").length,r=0,s=5e3;n.addEventListener("click",function(){g(r-1),E()}),a.addEventListener("click",function(){g(r+1),E()});var c=e.parentElement.parentElement;c.addEventListener("mouseenter",function(){clearInterval(i)}),c.addEventListener("mouseleave",h);var l,d=0;e.addEventListener("touchstart",function(e){d=e.changedTouches[0].clientX},{passive:!0}),e.addEventListener("touchend",function(e){var t=e.changedTouches[0].clientX-d;Math.abs(t)>50&&(g(r+(t<0?1:-1)),E())},{passive:!0}),f(),v(),h(),window.addEventListener("resize",function(){clearTimeout(l),l=setTimeout(function(){r>m()&&(r=m()),f(),v()},150)})}function u(){return window.innerWidth>=768?2:1}function m(){return Math.max(0,o-u())}function v(){var i=e.parentElement,o=u(),s=(i.offsetWidth-24*(o-1))/o,c=r*(s+24);e.style.transform="translateX(-"+c+"px)",n.disabled=0===r,a.disabled=r>=m(),t.querySelectorAll(".conditions-dot").forEach(function(e,t){e.classList.toggle("active",t===r)})}function g(e){r=Math.max(0,Math.min(e,m())),v()}function f(){t.innerHTML="";for(var e=m(),n=0;n<=e;n++){var a=document.createElement("button");a.className="conditions-dot"+(0===n?" active":""),a.setAttribute("aria-label","Go to slide "+(n+1)),function(e){a.addEventListener("click",function(){g(e),E()})}(n),t.appendChild(a)}}function p(){g(r>=m()?0:r+1)}function h(){clearInterval(i),i=setInterval(p,s)}function E(){h()}}function initAboutToggle(){var e=document.getElementById("aboutReadMore"),t=document.getElementById("aboutMore");e&&t&&e.addEventListener("click",function(){var n=t.classList.toggle("expanded");e.textContent=n?"Show Less ‚àí":"Read More +"})}function initServicesCarousel(){var e=document.getElementById("servicesTrack"),t=document.getElementById("servicesDots"),n=document.getElementById("servicesPrev"),a=document.getElementById("servicesNext");if(e&&t&&n&&a){var i,o=e.querySelectorAll(".service-card").length,r=0,s=4e3;n.addEventListener("click",function(){g(r-1),E()}),a.addEventListener("click",function(){g(r+1),E()});var c=e.parentElement.parentElement;c.addEventListener("mouseenter",function(){clearInterval(i)}),c.addEventListener("mouseleave",h);var l,d=0;e.addEventListener("touchstart",function(e){d=e.changedTouches[0].clientX},{passive:!0}),e.addEventListener("touchend",function(e){var t=e.changedTouches[0].clientX-d;Math.abs(t)>50&&(g(r+(t<0?1:-1)),E())},{passive:!0}),f(),v(),h(),window.addEventListener("resize",function(){clearTimeout(l),l=setTimeout(function(){r>m()&&(r=m()),f(),v()},150)})}function u(){return window.innerWidth>=1024?3:window.innerWidth>=600?2:1}function m(){return Math.max(0,o-u())}function v(){var i=e.parentElement,o=u(),s=(i.offsetWidth-24*(o-1))/o,c=r*(s+24);e.style.transform="translateX(-"+c+"px)",n.disabled=0===r,a.disabled=r>=m(),t.querySelectorAll(".services-dot").forEach(function(e,t){e.classList.toggle("active",t===r)})}function g(e){r=Math.max(0,Math.min(e,m())),v()}function f(){t.innerHTML="";for(var e=m(),n=0;n<=e;n++){var a=document.createElement("button");a.className="services-dot"+(0===n?" active":""),a.setAttribute("aria-label","Go to slide "+(n+1)),function(e){a.addEventListener("click",function(){g(e),E()})}(n),t.appendChild(a)}}function p(){g(r>=m()?0:r+1)}function h(){clearInterval(i),i=setInterval(p,s)}function E(){h()}}function initWhatsAppWidget(){var e=document.getElementById("waFloatBtn"),t=document.getElementById("waPopup"),n=document.getElementById("waPopupClose"),a=document.getElementById("waDirectChat"),i=document.querySelectorAll(".wa-quick-btn"),o=e?e.querySelector(".wa-float-badge"):null;if(e&&t){var r=!1,s="https://api.whatsapp.com/send?phone="+WHATSAPP_NUMBER;a.href=s+"&text="+encodeURIComponent("Hi Dr. Kalyan, I would like to know more."),e.addEventListener("click",function(){r=!r,t.classList.toggle("active",r),e.classList.toggle("active",r),r&&o&&(o.style.display="none")}),n.addEventListener("click",function(){r=!1,t.classList.remove("active"),e.classList.remove("active")}),i.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-msg"),n=s+"&text="+encodeURIComponent(t);window.open(n,"_blank")})}),document.addEventListener("click",function(n){!r||t.contains(n.target)||e.contains(n.target)||(r=!1,t.classList.remove("active"),e.classList.remove("active"))}),sessionStorage.getItem("wa_popup_shown")?o&&(o.style.display="none"):setTimeout(function(){r||(r=!0,t.classList.add("active"),e.classList.add("active"),o&&(o.style.display="none"),sessionStorage.setItem("wa_popup_shown","1"))},3e4)}}function initYouTubeFeed(){const e=document.getElementById("ytGrid");if(!e)return;const t="https://api.allorigins.win/raw?url="+encodeURIComponent("https://www.youtube.com/feeds/videos.xml?channel_id="+YOUTUBE_CHANNEL_ID);showSkeletons(e,3,"skeleton-card skeleton-card--sm"),fetch(t).then(function(e){if(!e.ok)throw new Error("Feed fetch failed");return e.text()}).then(function(t){var n=(new DOMParser).parseFromString(t,"text/xml").querySelectorAll("entry");if(0!==n.length){e.innerHTML="";for(var a=Math.min(n.length,YOUTUBE_VIDEO_COUNT),i=0;i<a;i++){var o=n[i],r=o.querySelector("videoId").textContent,s=o.querySelector("title").textContent,c="https://img.youtube.com/vi/"+r+"/mqdefault.jpg",l=document.createElement("a");l.className="yt-card",l.href="https://www.youtube.com/watch?v="+r,l.target="_blank",l.rel="noopener",l.innerHTML='<div class="yt-thumb"><img src="'+c+'" alt="'+sanitizeHTML(s)+'" width="320" height="180" loading="lazy" decoding="async"><div class="yt-play"><svg viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24L27 14v20" fill="white"/></svg></div></div><div class="yt-info"><h4>'+sanitizeHTML(s)+"</h4></div>",e.appendChild(l)}}else e.innerHTML='<p class="yt-loading">No videos found. Check the channel ID.</p>'}).catch(function(){e.innerHTML='<p class="yt-loading">Could not load videos. <a href="https://www.youtube.com/channel/'+YOUTUBE_CHANNEL_ID+'" target="_blank">Visit YouTube channel ‚Üí</a></p>'})}function initGoogleReviews(){var e=document.getElementById("googleReviewsGrid");if(e){var t=document.getElementById("googleReviewLink");if(t&&(t.href=GOOGLE_PLACE_ID&&"YOUR_PLACE_ID"!==GOOGLE_PLACE_ID?"https://search.google.com/local/writereview?placeid="+GOOGLE_PLACE_ID:GOOGLE_MAPS_URL),GOOGLE_PLACE_ID&&"YOUR_PLACE_ID"!==GOOGLE_PLACE_ID&&GOOGLE_MAPS_API_KEY&&"YOUR_API_KEY"!==GOOGLE_MAPS_API_KEY){var n="https://places.googleapis.com/v1/places/"+GOOGLE_PLACE_ID+"?key="+GOOGLE_MAPS_API_KEY;showSkeletons(e,1,"skeleton-card"),fetch(n,{headers:{"X-Goog-FieldMask":"reviews,rating,userRatingCount,googleMapsUri"}}).then(function(e){if(!e.ok)throw new Error("Places API error");return e.json()}).then(function(t){var n=t.reviews||[];if(0!==n.length){var a=document.getElementById("googleReviewsBadge");if(a&&t.rating){for(var i="",o=0;o<5;o++)o<Math.floor(t.rating)||o<t.rating?i+="‚òÖ":i+="‚òÜ";a.innerHTML='<img src="https://www.google.com/favicon.ico" alt="Google" class="google-icon"><span class="google-badge-rating">'+t.rating.toFixed(1)+'</span><span class="google-badge-stars">'+i+'</span><span class="google-badge-count">('+(t.userRatingCount||0)+" reviews)</span>",a.href=t.googleMapsUri||"#",a.style.display="flex"}if(t.rating&&t.userRatingCount){var r=document.querySelector('script[type="application/ld+json"]');if(r)try{var s=JSON.parse(r.textContent);s.aggregateRating={"@type":"AggregateRating",ratingValue:t.rating.toFixed(1),bestRating:"5",ratingCount:t.userRatingCount},r.textContent=JSON.stringify(s)}catch(e){}}buildGoogleReviewsSlider(e,n,t.googleMapsUri)}else e.innerHTML='<p class="google-reviews-empty">No reviews found.</p>'}).catch(function(){e.innerHTML='<div class="google-reviews-fallback"><p>Could not load Google reviews.</p><a href="'+GOOGLE_MAPS_URL+'" target="_blank">View on Google Maps ‚Üí</a></div>'})}else e.innerHTML='<div class="google-reviews-fallback"><p>Google Reviews not configured yet.</p><p>Set <code>GOOGLE_PLACE_ID</code> and <code>GOOGLE_MAPS_API_KEY</code> in script.js.</p></div>'}}function buildGoogleReviewsSlider(e,t,n){e.innerHTML="";var a=0,i=null,o=document.createElement("div");if(o.className="grev-track",t.forEach(function(e){var t=document.createElement("div");t.className="grev-card";for(var n=e.rating||5,a="",i=0;i<5;i++)a+=i<n?"‚òÖ":"‚òÜ";var r=e.text&&e.text.text||"",s=e.authorAttribution&&e.authorAttribution.displayName||"Google User",c=e.authorAttribution&&e.authorAttribution.photoUri?e.authorAttribution.photoUri:"",l=e.relativePublishTimeDescription||"";t.innerHTML='<div class="grev-header">'+(c?'<img src="'+c+'" alt="" class="grev-avatar">':'<div class="grev-avatar grev-avatar--placeholder">'+sanitizeHTML(s.charAt(0))+"</div>")+'<div class="grev-author-info"><strong class="grev-name">'+sanitizeHTML(s)+'</strong><span class="grev-time">'+sanitizeHTML(l)+'</span></div><img src="https://www.google.com/favicon.ico" alt="Google" class="grev-google-icon"></div><div class="grev-stars">'+a+"</div>"+(r?'<p class="grev-text">'+sanitizeHTML(r)+"</p>":""),o.appendChild(t)}),e.appendChild(o),t.length>1){var r=document.createElement("button");r.className="grev-nav grev-nav--prev",r.setAttribute("aria-label","Previous review"),r.innerHTML="‚Äπ",e.appendChild(r);var s=document.createElement("button");s.className="grev-nav grev-nav--next",s.setAttribute("aria-label","Next review"),s.innerHTML="‚Ä∫",e.appendChild(s);var c=document.createElement("div");c.className="grev-dots";for(var l=0;l<t.length;l++){var d=document.createElement("button");d.className="grev-dot"+(0===l?" active":""),d.dataset.index=l,c.appendChild(d)}function u(e){e<0&&(e=t.length-1),e>=t.length&&(e=0),a=e,o.style.transform="translateX(-"+100*a+"%)",c.querySelectorAll(".grev-dot").forEach(function(e,t){e.classList.toggle("active",t===a)})}function m(){clearInterval(i),i=setInterval(function(){u(a+1)},6e3)}e.appendChild(c),r.addEventListener("click",function(){u(a-1),m()}),s.addEventListener("click",function(){u(a+1),m()}),c.addEventListener("click",function(e){e.target.classList.contains("grev-dot")&&(u(parseInt(e.target.dataset.index)),m())}),m(),e.addEventListener("mouseenter",function(){clearInterval(i)}),e.addEventListener("mouseleave",function(){m()})}}function initLazyIframes(){var e=document.querySelectorAll("iframe[data-src]");if(e.length)if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var n=e.target;n.src=n.getAttribute("data-src"),n.removeAttribute("data-src"),t.unobserve(n)}})},{rootMargin:"200px"});e.forEach(function(e){t.observe(e)})}else e.forEach(function(e){e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")})}function initInstagramFeed(){var e=document.getElementById("instaSlideshow");if(e)if(INSTAGRAM_ACCESS_TOKEN&&"YOUR_ACCESS_TOKEN"!==INSTAGRAM_ACCESS_TOKEN){var t="https://graph.instagram.com/me/media?fields=id,caption,media_type,media_url,thumbnail_url,permalink,timestamp&limit="+INSTAGRAM_POST_COUNT+"&access_token="+INSTAGRAM_ACCESS_TOKEN;showSkeletons(e,4,"skeleton-card skeleton-card--sm"),fetch(t).then(function(e){if(!e.ok)throw new Error("Instagram API error");return e.json()}).then(function(t){var n=(t.data||[]).filter(function(e){return"IMAGE"===e.media_type||"CAROUSEL_ALBUM"===e.media_type||"VIDEO"===e.media_type});0!==n.length?buildInstaSlideshow(e,n):e.innerHTML='<p class="insta-loading">No posts found.</p>'}).catch(function(){e.innerHTML='<div class="insta-fallback"><p>Could not load Instagram posts. The access token may have expired.</p><a href="https://www.instagram.com/kalyan_oncosurgeon" target="_blank">Visit Instagram profile ‚Üí</a></div>'})}else e.innerHTML='<div class="insta-fallback"><p>Instagram feed not configured yet.</p><p>Set <code>INSTAGRAM_ACCESS_TOKEN</code> in script.js to enable the live feed.</p></div>'}function buildInstaSlideshow(e,t){var n=0,a=null;e.innerHTML="",e.className="insta-slideshow insta-slideshow--ready";var i=document.createElement("div");i.className="insta-track",t.forEach(function(e){var t=document.createElement("a");t.className="insta-slide",t.href=e.permalink,t.target="_blank",t.rel="noopener";var n="VIDEO"===e.media_type?e.thumbnail_url:e.media_url,a=e.caption?sanitizeHTML(e.caption.substring(0,120)):"";t.innerHTML='<div class="insta-slide-img"><img src="'+n+'" alt="'+a+'" loading="lazy" decoding="async">'+("VIDEO"===e.media_type?'<span class="insta-video-badge">‚ñ∂</span>':"")+("CAROUSEL_ALBUM"===e.media_type?'<span class="insta-carousel-badge">‚ùë‚ùë</span>':"")+"</div>"+(a?'<p class="insta-caption">'+a+(e.caption.length>120?"‚Ä¶":"")+"</p>":""),i.appendChild(t)}),e.appendChild(i);var o=document.createElement("button");o.className="insta-nav insta-nav--prev",o.setAttribute("aria-label","Previous posts"),o.innerHTML="‚Äπ",e.appendChild(o);var r=document.createElement("button");r.className="insta-nav insta-nav--next",r.setAttribute("aria-label","Next posts"),r.innerHTML="‚Ä∫",e.appendChild(r);var s,c=v(),l=Math.ceil(t.length/c),d=document.createElement("div");d.className="insta-dots";for(var u=0;u<l;u++){var m=document.createElement("button");m.className="insta-dot"+(0===u?" active":""),m.setAttribute("aria-label","Go to page "+(u+1)),m.dataset.index=u,d.appendChild(m)}function v(){return window.innerWidth<=480?1:window.innerWidth<=768?2:window.innerWidth<=1024?3:4}function g(e){c=v(),l=Math.ceil(t.length/c),e<0&&(e=l-1),e>=l&&(e=0);var a=-(n=e)*c*(100/c);i.style.transform="translateX("+a+"%)",d.querySelectorAll(".insta-dot").forEach(function(e,t){e.classList.toggle("active",t===n)})}function f(){clearInterval(a),a=setInterval(function(){g(n+1)},5e3)}e.appendChild(d),o.addEventListener("click",function(){g(n-1),f()}),r.addEventListener("click",function(){g(n+1),f()}),d.addEventListener("click",function(e){e.target.classList.contains("insta-dot")&&(g(parseInt(e.target.dataset.index)),f())}),f(),e.addEventListener("mouseenter",function(){clearInterval(a)}),e.addEventListener("mouseleave",function(){f()}),window.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(function(){c=v(),l=Math.ceil(t.length/c),d.innerHTML="";for(var e=0;e<l;e++){var n=document.createElement("button");n.className="insta-dot"+(0===e?" active":""),n.setAttribute("aria-label","Go to page "+(e+1)),n.dataset.index=e,d.appendChild(n)}g(0)},150)})}function showSkeletons(e,t,n){e.innerHTML="";for(var a=0;a<t;a++){var i=document.createElement("div");i.className="skeleton"+(n?" "+n:""),e.appendChild(i)}}function initBackToTop(){var e=document.getElementById("backToTop");e&&(window.addEventListener("scroll",function(){window.pageYOffset>400?e.classList.add("visible"):e.classList.remove("visible")},{passive:!0}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}))}function formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function sanitizeHTML(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function viewStoredData(){console.log("=== STORED DATA ==="),console.log("Contacts:",JSON.parse(localStorage.getItem("contacts"))||[])}function clearAllData(){confirm("Are you sure you want to clear all stored data? This cannot be undone.")&&(localStorage.removeItem("contacts"),location.reload())}window.viewStoredData=viewStoredData,window.clearAllData=clearAllData,console.log("%cüè• Clinical Serenity Website","color: #0D7377; font-size: 20px; font-weight: bold;"),console.log("%cAdmin Functions Available:","color: #FF6B6B; font-weight: bold;"),console.log("- viewStoredData() - View all stored contacts"),console.log("- clearAllData() - Clear all stored data"),console.log("%cWebsite ready!","color: #0D7377; font-weight: bold;");